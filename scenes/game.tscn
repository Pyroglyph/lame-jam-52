[gd_scene load_steps=37 format=3 uid="uid://cm5wyjvcwvasy"]

[ext_resource type="Script" uid="uid://ba2h7jay6m07v" path="res://src/game.gd" id="1_iywne"]
[ext_resource type="Texture2D" uid="uid://bnvbe6ocw4xge" path="res://assets/Background.png" id="1_lbhrr"]
[ext_resource type="PackedScene" uid="uid://bu3xl85er855x" path="res://scenes/items/scroll.tscn" id="2_iywne"]
[ext_resource type="PackedScene" uid="uid://ddshwma8lykn3" path="res://scenes/cell.tscn" id="3_iywne"]
[ext_resource type="PackedScene" uid="uid://d3onrjn6ydtcq" path="res://scenes/items/goblet.tscn" id="3_p57ef"]
[ext_resource type="PackedScene" uid="uid://cqyx12pl6n80p" path="res://scenes/items/dagger.tscn" id="4_u5sy4"]
[ext_resource type="PackedScene" uid="uid://pe4oi8f578bc" path="res://scenes/items/crown.tscn" id="5_0tnpc"]
[ext_resource type="PackedScene" uid="uid://jol80pseuel6" path="res://scenes/items/sword.tscn" id="5_ir15t"]
[ext_resource type="PackedScene" uid="uid://cg000hwsj0kil" path="res://scenes/items/necklace.tscn" id="5_vtaks"]
[ext_resource type="PackedScene" uid="uid://bj8hmfx4cfcfh" path="res://scenes/items/scepter.tscn" id="6_kvpfn"]
[ext_resource type="FontFile" uid="uid://dwh88hp7prsrr" path="res://assets/alagard.ttf" id="8_gee14"]
[ext_resource type="AudioStream" uid="uid://duukm74sv44i" path="res://assets/audio/ambience_forest.mp3" id="9_37s47"]
[ext_resource type="Script" uid="uid://d117er2xcwdrr" path="res://src/lore.gd" id="9_264po"]
[ext_resource type="PackedScene" uid="uid://dqqytu5vdcuop" path="res://scenes/backgrounds/forest_day.tscn" id="10_1kice"]
[ext_resource type="PackedScene" uid="uid://e6jvkkdti2qi" path="res://scenes/backgrounds/forest_evening.tscn" id="11_5newe"]
[ext_resource type="Script" uid="uid://cck8kukpkx6ws" path="res://src/discard_area.gd" id="11_dinhu"]
[ext_resource type="PackedScene" uid="uid://b6dtn6mmayd5w" path="res://scenes/backgrounds/forest_night.tscn" id="12_37s47"]
[ext_resource type="PackedScene" uid="uid://dlq4jnrdxbx6s" path="res://scenes/backgrounds/mountain_day.tscn" id="13_5newe"]
[ext_resource type="PackedScene" uid="uid://dijgy80lkkngu" path="res://scenes/backgrounds/dungeon.tscn" id="13_37s47"]
[ext_resource type="Script" uid="uid://b1tg51aa1xrvc" path="res://src/score_tracker.gd" id="13_kvuet"]
[ext_resource type="Texture2D" uid="uid://b3y5o0wwxxdnt" path="res://assets/Background_LeatherBag.png" id="16_pl11u"]
[ext_resource type="Theme" uid="uid://bl5y0osvxdl08" path="res://theme.tres" id="17_5newe"]
[ext_resource type="Texture2D" uid="uid://1jar5momsh3c" path="res://assets/Background_LeatherBagstring.png" id="17_bhx41"]
[ext_resource type="PackedScene" uid="uid://chi4j7kfsadhr" path="res://scenes/lore_overlay.tscn" id="20_1kice"]
[ext_resource type="Texture2D" uid="uid://bf53sgwegb0i5" path="res://assets/Background_Cloth.png" id="21_qnb83"]

[sub_resource type="Resource" id="Resource_1kice"]
script = ExtResource("9_264po")
text = "Your journey with [color=#ff0]the Knight[/color] begins in a lush forest.

He spots a group of [color=#5fc]slimes[/color] in a clearing and rushes off to deal with them."
background = ExtResource("10_1kice")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="Resource" id="Resource_37s47"]
script = ExtResource("9_264po")
text = "As the sun sets, [color=#ff0]the Knight[/color] animatedly tells you a tale of wonder and whimsy as you both eat around the campfire.

You try and listen, but it's hard to hear him over his armour clanking."
background = ExtResource("11_5newe")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="Resource" id="Resource_bt5mj"]
script = ExtResource("9_264po")
text = "You awake with a start to the sounds of clashing swords. [color=#c00]Bandits[/color] have found your campsite!

Luckily, [color=#ff0]the Knight[/color] is skilled and deftly protects both you and the rabbit stew left over from your earlier meal.
You're not sure which he values more..."
background = ExtResource("12_37s47")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="Resource" id="Resource_bhx41"]
script = ExtResource("9_264po")
text = "On the way to the [color=#ccc]Mountain Village[/color] you smell something pungent. Something [i]dank[/i].

Soon, you locate the entrance to a [color=#0a5]Dungeon[/color], into which [color=#ff0]the Knight[/color] immediately charges, sword held high!"
background = ExtResource("13_37s47")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="Resource" id="Resource_qnb83"]
script = ExtResource("9_264po")
text = "It feels like you've been here for days. The miasma of the [color=#0a5]Dungeon[/color] feels heavy in your lungs, almost as if they're filled with a thick goo.

The only thing keeping you both moving is the fading hope of finally finding the exit."
background = ExtResource("13_37s47")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="Resource" id="Resource_e1j6l"]
script = ExtResource("9_264po")
text = "After spending hours in the suffocating belly of the [color=#0a5]Dungeon[/color], the grandiose sight of the mountains nearly brings a tear to your eye.

Re-energised by the clean air and the sight of your goal, [color=#ff0]the Knight[/color] forges ahead."
background = ExtResource("13_5newe")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="Resource" id="Resource_pl11u"]
script = ExtResource("9_264po")
text = "You suddenly bump into [color=#ff0]the Knightâ€™s[/color] back - he's stopped dead in his tracks.
Peering past, you see the body of a young adventurer, fallen to frostbite. Their gear still lies beside them, untouched.

[color=#ff0]The Knight[/color] removes his helmet, says a few words, and you move on."
background = ExtResource("13_5newe")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="Resource" id="Resource_5newe"]
script = ExtResource("9_264po")
text = "After all the trials you've faced, you finally reach the [color=#ccc]Mountain Village[/color] safely, ready to sell your hard-earned loot."
background = ExtResource("13_5newe")
metadata/_custom_type_script = "uid://d117er2xcwdrr"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_p57ef"]
size = Vector2(122, 122)

[sub_resource type="FontVariation" id="FontVariation_trtic"]
base_font = ExtResource("8_gee14")
baseline_offset = 0.145

[sub_resource type="LabelSettings" id="LabelSettings_kvuet"]
shadow_size = 0
shadow_color = Color(0, 0, 0, 1)

[node name="Game" type="Node2D"]
texture_filter = 1
script = ExtResource("1_iywne")
common_items = Array[PackedScene]([ExtResource("4_u5sy4"), ExtResource("3_p57ef"), ExtResource("2_iywne"), ExtResource("5_ir15t")])
uncommon_items = Array[PackedScene]([ExtResource("5_vtaks"), ExtResource("6_kvpfn")])
rare_items = Array[PackedScene]([ExtResource("5_0tnpc")])
lore = Array[ExtResource("9_264po")]([SubResource("Resource_1kice"), SubResource("Resource_37s47"), SubResource("Resource_bt5mj"), SubResource("Resource_bhx41"), SubResource("Resource_qnb83"), SubResource("Resource_e1j6l"), SubResource("Resource_pl11u"), SubResource("Resource_5newe")])

[node name="Ambience" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("9_37s47")
autoplay = true
panning_strength = 0.0
parameters/looping = true

[node name="Background" type="Node2D" parent="."]

[node name="MountainDayBackground" parent="Background" instance=ExtResource("13_37s47")]

[node name="Bag" type="Node2D" parent="."]

[node name="BackgroundLeatherBag" type="Sprite2D" parent="Bag"]
position = Vector2(160, 90)
texture = ExtResource("16_pl11u")

[node name="BackgroundLeatherBagstring" type="Sprite2D" parent="Bag"]
position = Vector2(160, 90)
texture = ExtResource("17_bhx41")

[node name="Bag_ClothTM" type="Sprite2D" parent="Bag"]
visible = false
texture = ExtResource("1_lbhrr")
centered = false

[node name="Grid" type="Node2D" parent="Bag"]
position = Vector2(48, 84)

[node name="Cell5" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(0, 32)

[node name="Cell6" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(32, 32)

[node name="Cell7" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(64, 32)

[node name="Cell8" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(96, 32)

[node name="Cell13" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(0, 64)

[node name="Cell14" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(32, 64)

[node name="Cell15" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(64, 64)

[node name="Cell16" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(96, 64)

[node name="Cell17" parent="Bag/Grid" instance=ExtResource("3_iywne")]

[node name="Cell25" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(32, 0)

[node name="Cell18" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(64, 0)

[node name="Cell21" parent="Bag/Grid" instance=ExtResource("3_iywne")]
position = Vector2(96, 0)

[node name="DiscardArea" type="Area2D" parent="."]
position = Vector2(258, 113)
script = ExtResource("11_dinhu")

[node name="BackgroundCloth" type="Sprite2D" parent="DiscardArea"]
position = Vector2(-98, -23)
texture = ExtResource("21_qnb83")

[node name="CollisionShape2D" type="CollisionShape2D" parent="DiscardArea"]
position = Vector2(1, 6)
shape = SubResource("RectangleShape2D_p57ef")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
theme = ExtResource("17_5newe")
metadata/_edit_use_anchors_ = true

[node name="NextQuestButton" type="Button" parent="UI"]
layout_mode = 0
offset_left = 231.0
offset_top = -3.0
offset_right = 323.0
offset_bottom = 20.0
theme_override_fonts/font = SubResource("FontVariation_trtic")
text = "Next Quest"
alignment = 0

[node name="Score" type="Label" parent="UI"]
layout_mode = 0
offset_left = 175.0
offset_top = 3.0
offset_right = 229.0
offset_bottom = 18.0
text = "0"
label_settings = SubResource("LabelSettings_kvuet")
script = ExtResource("13_kvuet")

[node name="LoreOverlay" parent="." instance=ExtResource("20_1kice")]
visible = false

[connection signal="pressed" from="UI/NextQuestButton" to="." method="next_quest"]
[connection signal="next_day" from="LoreOverlay" to="." method="show_next_day"]
